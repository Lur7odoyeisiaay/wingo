<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wingo 2.0 Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script type="module">
  // Firebase core
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";

  // Firebase Auth
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    sendEmailVerification,
    GoogleAuthProvider,
    signInWithPopup
  } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDa8ilGRerUgfN6nvoikHJeBGvK9v0bg7Y",
    authDomain: "wingo-2o.firebaseapp.com",
    projectId: "wingo-2o",
    storageBucket: "wingo-2o.appspot.com",
    messagingSenderId: "883614286753",
    appId: "1:883614286753:web:20407fa46e2f01b449c1e0"
  };

  // Init
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const googleProvider = new GoogleAuthProvider();

  // REGISTER
  window.registerUser = async () => {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    if (!email || !password) {
      alert("Email aur password bharo");
      return;
    }

    const userCred = await createUserWithEmailAndPassword(auth, email, password);
    await sendEmailVerification(userCred.user);

    alert("Verification email bhej di gayi hai. Inbox / Spam check karo.");
  };

  // LOGIN
  window.loginUser = async () => {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    const userCred = await signInWithEmailAndPassword(auth, email, password);

    // ðŸ”¥ MUST
    await userCred.user.reload();

    if (!userCred.user.emailVerified) {
      alert("Pehle email verify karo");
      return;
    }

    alert("Login successful");
    
  } catch (e) {
    alert(e.message);
  }
};
  
  };
</script>
  
<h2>Wingo 2.0</h2>

<input id="email" type="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">

<button onclick="registerUser()">Register</button>
<button onclick="loginUser()">Login</button>
<button onclick="googleLogin()">Continue with Google</button>
  
</body>
</html>
